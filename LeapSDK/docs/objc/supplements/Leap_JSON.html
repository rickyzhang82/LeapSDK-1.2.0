

  
  
 
  
  
 


<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>WebSocket Communication &mdash; Leap Motion Objective-C SDK v1.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/css/font-awesome.min.css"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Leap Motion Objective-C SDK v1.2 documentation" href="../index.html" />
    <link rel="up" title="Appendices" href="Leap_Supplements.html" />
    <link rel="next" title="Leap Motion SDK Release Notes" href="SDK_Release_Notes.html" />
    <link rel="prev" title="Using the Diagnostic Visualizer" href="Leap_Visualizer.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31536531-1']);
  _gaq.push(['_setDomainName', 'leapmotion.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>







 

<script>

    function getQueryValue(variable)
    {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
            if(pair[0] == variable){return pair[1];}
        }
        return(false);
    }

    var requestedAPI = getQueryValue("proglang");
    if(requestedAPI == "current") requestedAPI = localStorage["currentAPI"];
    var pageAPI = 'objc';
    var hasAPI = {};
    hasAPI.cpp = true;
    hasAPI.csharp = true;
    hasAPI.objc = true;
    hasAPI.java = true;
    hasAPI.javascript = true;
    hasAPI.python = true;

    if(requestedAPI && (requestedAPI != pageAPI))
    {
        if(pageAPI != 'none'){
            var redirectedLocation = '../../objc/supplements/Leap_JSON.html';
            if( requestedAPI == 'cpp' && hasAPI.cpp){
                redirectedLocation = "../../cpp/supplements/Leap_JSON.html";
            }
            else if( requestedAPI == 'csharp' && hasAPI.csharp){
                redirectedLocation = "../../csharp/supplements/Leap_JSON.html";
            }
            else if( requestedAPI == 'objc' && hasAPI.objc){
                redirectedLocation = "../../objc/supplements/Leap_JSON.html";
            }
            else if( requestedAPI == 'java' && hasAPI.java) {
                redirectedLocation = "../../java/supplements/Leap_JSON.html";
            }
            else if( requestedAPI == 'javascript' && hasAPI.javascript){
                redirectedLocation = "../../javascript/supplements/Leap_JSON.html";
            }
            else if( requestedAPI == 'python' && hasAPI.python) {
                redirectedLocation = "../../python/supplements/Leap_JSON.html";
            } else {
                    redirectedLocation ="Leap_Supplements.html";
            }

            //Guard against redirecting to the same page (infinitely)
            if('../../objc/supplements/Leap_JSON.html' != redirectedLocation) window.location.replace(redirectedLocation);
        }
    }

</script>

<script>
    window.addEventListener('keyup', handleKeyInput);
    function handleKeyInput(e)
    {
        var code;
        if (!e) var e = window.event;
        if (e.keyCode) code = e.keyCode;
        else if (e.which) code = e.which;
        var character = String.fromCharCode(code);
        if( character == "J" & e.altKey){
            window.location.assign("Leap_Visualizer.html");    }
        else if( character == "K" & e.altKey){
            window.location.assign("SDK_Release_Notes.html");
        }
        
    }
</script>
<script type="text/javascript" src="/assets/standalone-header.js?r7"></script>
<link rel="stylesheet" href="/assets/standalone-header.css?r7" type="text/css" />


  </head>
  <body>

<div class="developer-portal-styles">
  <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="https://developer.leapmotion.com/" class="logo-link pull-left">
          <img class="media-object logo" src="../_static/logo.png" alt="Leap Motion Developer"/><span class="text">Developer</span></a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav header-navigation">
          <li class="hidden-xs hidden-sm"><a href="https://developer.leapmotion.com/downloads">SDK Download</a></li>

          <li><a href="/documentation">Documentation</a></li>

          <li><a href="https://developer.leapmotion.com/libraries">Examples</a></li>

          <li><a href="https://developer.leapmotion.com/apps/overview">Apps</a></li>

          <li><a href="https://community.leapmotion.com/category/dev">Forums</a></li>

          <li><a href="http://labs.leapmotion.com" target="_blank">Blog</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>

<div class="navbar navbar-default navbar-fixed-top secondary">
  <div class="container">
    <div class="row">
      <div class="col-md-3">
        <ul class="nav">
          
            <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
    
    <span>Objective-C</span>
    
    <b class="caret"></b></a>
  <ul class="dropdown-menu platform">
  
    <li><a><strong>Choose a Language</strong></a></li>
    <li class="divider"></li>
    <li class="proglanglinks">
               <a href="../../cpp/supplements/Leap_JSON.html" onclick="localStorage['currentAPI'] = 'cpp'" class="active">C++</a>
           
        
      
    </li>
    <li class="proglanglinks">
                <a href="../../csharp/supplements/Leap_JSON.html" onclick="localStorage['currentAPI'] = 'csharp'" class="active">C# and Unity</a>
            
        
      
    </li>
    <li class="proglanglinks">
            <a href="#" onclick="localStorage['currentAPI'] = 'objc'" class="active">Objective-C</a>
        
      
    </li>
    <li class="proglanglinks">
                <a href="../../java/supplements/Leap_JSON.html" onclick="localStorage['currentAPI'] = 'java'" class="active">Java</a>
            
        
      
    </li>
    <li class="proglanglinks">
                <a href="../../javascript/supplements/Leap_JSON.html" onclick="localStorage['currentAPI'] = 'javascript'" class="active">JavaScript</a>
            
        
      
    </li>
    <li class="proglanglinks">
                <a href="../../python/supplements/Leap_JSON.html" onclick="localStorage['currentAPI'] = 'python'" class="active">Python</a>
            
        
      
    </li>
  
  </ul>
</li>
          
        </ul>
      </div>
      <div class="col-md-9 search">
        
          <form class="navbar-form" action="../search.html" method="get">
 <div class="form-group">
  <span><i class="fa fa-search"></i></span>
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>
</div>
<script>
    //Remove dev portal header and footer when viewing from file system
    if(window.location.protocol == 'file:'){
        var navNodes = document.querySelectorAll("div.navbar-collapse.collapse");
        //navNodes[0].style.display = 'none';
        navNodes[0].parentNode.removeChild(navNodes[0]);
    }

</script>


<div id="wrap" data-spy="scroll" data-target="#sidebar">
  <div class="container">
    <div class="row">
      <div class="col-md-9 pull-right">
        <!-- 
 
<span id="breadcrumbs">
  <a href="../index.html">Home</a>&raquo;
    <a href="Leap_Supplements.html" accesskey="U">Appendices</a>&raquo;
  WebSocket Communication
</span> -->
        
  <div class="section" id="websocket-communication">
<h1>WebSocket Communication<a class="headerlink" href="#websocket-communication" title="Permalink to this headline">¶</a></h1>
<p>The Leap Motion software installed on any computer with a Leap Motion controller provides tracking data through a WebSocket server. The WebSocket server listens to port 6347 on the localhost domain (<a class="reference external" href="../_static/JSONViewer.html">http://127.0.0.1:6437</a>). Any client application, including Web clients, that can make a WebSocket connection can access the Leap Motion tracking data in the form of JSON-formatted messages. The WebSocket server is provided by the <tt class="docutils literal"><span class="pre">leapd</span></tt> process, which runs as a service on Windows and a daemon on OS X and Linux.</p>
<p>In most cases, you should use an existing client library rather than implement this protocol directly in an application. This article is provided to help you if you are developing your own library. Existing libraries include:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">leap.js</span></tt> &#8211; A JavaScript client library for browsers and Nodejs. Available at <a class="reference external" href="https://github.com/leapmotion/leapjs">https://github.com/leapmotion/leapjs</a>.</li>
<li><tt class="docutils literal"><span class="pre">LeapMotionAS3</span></tt> &#8211; An ActionScript client library for Adobe Flash and AIR. Available at <a class="reference external" href="https://github.com/logotype/LeapMotionAS3">https://github.com/logotype/LeapMotionAS3</a>.</li>
</ul>
<div class="section" id="protocols">
<h2>Protocols<a class="headerlink" href="#protocols" title="Permalink to this headline">¶</a></h2>
<p>The communication between the WebSocket server and a client is mediated by a data exchange subprotocol. This subprotocol defines which messages can be sent between the client and the server and the format of the JSON data. The protocol version defines which feature set the server uses to communicate with a client.</p>
<p>You can request a specific version of the Leap Motion subprotocol by adding a string of the form <tt class="docutils literal"><span class="pre">v5.json</span></tt> to the WebSocket URL, where the digit, in this case <tt class="docutils literal"><span class="pre">5</span></tt> indicates which version to use. If you omit this part of the URL, you will get version 1. Note that the Leap Motion leap.js JavaScript library automatically selects the protocol version corresponding to the library version. When you successfully connect to the Leap Motion WebSocket server, it responds with a message reporting  the protocol version. If the client&#8217;s Leap Motion software is out-of-date, then this version could be less than the one you requested.</p>
<p>The current version of the protocol is <tt class="docutils literal"><span class="pre">v5.json</span></tt>.</p>
</div>
<div class="section" id="client-server-messages">
<h2>Client-Server Messages<a class="headerlink" href="#client-server-messages" title="Permalink to this headline">¶</a></h2>
<p>The WebSocket server and a client can exchange the following messages:</p>
<ul>
<li><p class="first">Server to client</p>
<p><tt class="docutils literal"><span class="pre">version</span></tt></p>
<blockquote>
<div><p>Indicates the version of the Leap Motion subprotocol:</p>
<div class="code javascript highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="n">version</span><span class="p">:</span><span class="mi">5</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p><tt class="docutils literal"><span class="pre">deviceEvent</span></tt></p>
<blockquote>
<div><p>Sent when the Leap Motion when the service/daemon is paused or resumed and when the controller hardware is plugged in or unplugged:</p>
<div class="code javascript highlight-python"><div class="highlight"><pre><span class="p">{</span>
  <span class="s">&quot;event&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">&quot;state&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">&quot;attached&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="s">&quot;NNNNNNNNNNN&quot;</span><span class="p">,</span>
      <span class="s">&quot;streaming&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;peripheral&quot;</span>
    <span class="p">},</span>
    <span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;deviceEvent&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">id</span></tt></td>
<td>A string containing the ID of the Leap Mption device.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">attached</span></tt></td>
<td>Whether the hardware device is plugged in or attached.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">streaming</span></tt></td>
<td>Whether the service/daemon is sending tracking data. Always false if attached is false.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">type</span></tt></td>
<td>The hardware form factor. One of: &#8220;peripheral&#8221;, &#8220;keyboard&#8221;, &#8220;laptop&#8221;</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Tracking data</dt>
<dd><p class="first last">Contains a set of tracking data. See <a class="reference internal" href="#json-tracking-data-format">JSON tracking data format</a>.</p>
</dd>
</dl>
</div></blockquote>
</li>
<li><p class="first">Client to server</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">background</span></tt></dt>
<dd><p class="first">Specifies whether the client wants to receive frames when it is not the <tt class="docutils literal"><span class="pre">focused</span></tt> application:</p>
<div class="code javascript last highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="n">background</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
<span class="p">{</span><span class="n">background</span><span class="p">:</span> <span class="n">false</span><span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">focused</span></tt></dt>
<dd><p class="first">Specifies whether the application is active. Setting <tt class="docutils literal"><span class="pre">focused</span></tt> to true, stops other WebSocket clients from getting data. Setting <tt class="docutils literal"><span class="pre">focused</span></tt> to false stops your WebSocket client from getting data (and potentially unwanted input):</p>
<div class="code javascript last highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="n">focused</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
<span class="p">{</span><span class="n">focused</span><span class="p">:</span> <span class="n">false</span><span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">enableGestures</span></tt></dt>
<dd><p class="first">Enables or disables gesture recognition data:</p>
<div class="code javascript last highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="n">enableGestures</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
<span class="p">{</span><span class="n">enableGestures</span><span class="p">:</span> <span class="n">false</span><span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
<p>To send a message to the WebSocket server, first encode the desired message as a JSON string. In JavaScript, for example, you can use the JSON <tt class="docutils literal"><span class="pre">stringify()</span></tt> function and then send the message using the WebSocket <tt class="docutils literal"><span class="pre">send</span></tt> function:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">//ws is a connected WebSocket object</span>
<span class="kd">var</span> <span class="nx">backgroundMessage</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">background</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">backgroundMessage</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="json-tracking-data-format">
<h2>JSON tracking data format<a class="headerlink" href="#json-tracking-data-format" title="Permalink to this headline">¶</a></h2>
<p>Each frame of data from the WebSocket server contains JSON defining a frame. The attributes of a frame in the JSON message are similar, but not identical to those of a <a class="reference external" href="../api/Leap.Frame.html">LeapFrame</a> object obtained through the native library. They include:</p>
<pre class="literal-block">
&quot;<a class="reference external" href="../api/Leap.Frame.html#currentFrameRate">currentFrameRate</a>&quot;: float
&quot;<a class="reference external" href="../api/Leap.Frame.html#id">id</a>&quot;: float
&quot;<a class="reference internal" href="#rotation"><em>r</em></a>&quot;: array of floats (Matrix)
&quot;<a class="reference internal" href="#scale"><em>s</em></a>&quot;: float
&quot;<a class="reference internal" href="#translation"><em>t</em></a>&quot;:  array of floats (vector)
&quot;<a class="reference external" href="../api/Leap.Frame.html#timestamp">timestamp</a>&quot;: integer

&quot;gestures&quot;: array of Gesture objects
    (Attributes vary by gesture type)
    &quot;<a class="reference external" href="../api/Leap.CircleGesture.html#center">center</a>&quot;: array of floats (vector) -- circle only
    &quot;<a class="reference external" href="../api/Leap.SwipeGesture.html#direction">direction</a>&quot;: array of floats (vector) -- swipe, keyTap, screenTap only
    &quot;<a class="reference external" href="../api/Leap.Gesture.html#duration">duration</a>&quot;: integer microseconds
    &quot;<a class="reference external" href="../api/Leap.Gesture.html#handIds">handIds</a>&quot;: array of integers
    &quot;<a class="reference external" href="../api/Leap.Gesture.html#id">id</a>&quot;: integer
    &quot;<a class="reference external" href="../api/Leap.CircleGesture.html#normal">normal</a>&quot;: array of floats -- circle only
    &quot;<a class="reference external" href="../api/Leap.Gesture.html#pointableIds">pointableIds</a>&quot;: array
    &quot;<a class="reference external" href="../api/Leap.SwipeGesture.html#position">position</a>&quot;: array of floats (vector) -- swipe, keyTap, screenTap only
    &quot;<a class="reference external" href="../api/Leap.CircleGesture.html#progress">progress</a>&quot;: float -- circle, keyTap, screenTap only
    &quot;<a class="reference external" href="../api/Leap.CircleGesture.html#radius">radius</a>&quot;: float -- circle only
    &quot;<a class="reference external" href="../api/Leap.SwipeGesture.html#speed">speed</a>&quot;: float -- swipe only
    &quot;<a class="reference external" href="../api/Leap.SwipeGesture.html#startPosition">startPosition</a>&quot;: array of float (vector) -- swipe only
    &quot;<a class="reference external" href="../api/Leap.Gesture.html#state">state</a>&quot;: string - one of &quot;start&quot;, &quot;update&quot;, &quot;stop&quot;
    &quot;<a class="reference external" href="../api/Leap.Gesture.html#type">type</a>&quot;: string - one of &quot;circle&quot;, &quot;swipe&quot;, &quot;keyTap&quot;, &quot;screenTap&quot;

&quot;hands&quot;: array of Hand objects
   &quot;<a class="reference external" href="../api/Leap.Hand.html#direction">direction</a>&quot;: array of floats (vector)
   &quot;<a class="reference external" href="../api/Leap.Hand.html#id">id</a>&quot;: integer
   &quot;<a class="reference external" href="../api/Leap.Hand.html#palmNormal">palmNormal</a>&quot;: array of floats (vector)
   &quot;<a class="reference external" href="../api/Leap.Hand.html#palmPosition">palmPosition</a>&quot;: array of floats (vector)
   &quot;<a class="reference external" href="../api/Leap.Hand.html#palmVelocity">palmVelocity</a>&quot;: array of floats (vector)
   &quot;<a class="reference internal" href="#rotation"><em>r</em></a>&quot;: array of floats (Matrix)
   &quot;<a class="reference internal" href="#scale"><em>s</em></a>&quot;: float
   &quot;<a class="reference external" href="../api/Leap.Hand.html#sphereCenter">sphereCenter</a>&quot;: array of floats (vector)
   &quot;<a class="reference external" href="../api/Leap.Hand.html#sphereRadius">sphereRadius</a>&quot;: float
   &quot;<a class="reference external" href="../api/Leap.Hand.html#stabilizedPalmPosition">stabilizedPalmPosition</a>&quot;: array of floats (vector)
   &quot;<a class="reference internal" href="#translation"><em>t</em></a>&quot;: array of floats (vector)
   &quot;<a class="reference external" href="../api/Leap.Hand.html#timeVisible">timeVisible</a>&quot;: float

&quot;interactionBox&quot;: object
   &quot;<a class="reference external" href="../api/Leap.InteractionBox.html#center">center</a>&quot;: array of floats (vector)
   &quot;<a class="reference external" href="../api/Leap.InteractionBox.html#size">size</a>&quot;: array of floats  (vector)

&quot;pointables&quot;: array of Pointable objects
   &quot;<a class="reference external" href="../api/Leap.Pointable.html#">direction</a>&quot;: array of floats (vector)
   &quot;<a class="reference external" href="../api/Leap.Pointable.html#handId">handId</a>&quot;: integer
   &quot;<a class="reference external" href="../api/Leap.Pointable.html#id">id</a>&quot;: integer
   &quot;<a class="reference external" href="../api/Leap.Pointable.html#length">length</a>&quot;: float
   &quot;<a class="reference external" href="../api/Leap.Pointable.html#stabilizedTipPosition">stabilizedTipPosition</a>&quot;: array of floats (vector)
   &quot;<a class="reference external" href="../api/Leap.Pointable.html#timeVisible">timeVisible</a>&quot;: float
   &quot;<a class="reference external" href="../api/Leap.Pointable.html#tipPosition">tipPosition</a>&quot;:  array of floats (vector)
   &quot;<a class="reference external" href="../api/Leap.Pointable.html#tipVelocity">tipVelocity</a>&quot;:  array of floats (vector)
   &quot;<a class="reference external" href="../api/Leap.Pointable.html#tool">tool</a>&quot;: boolean (true or false)
   &quot;<a class="reference external" href="../api/Leap.Pointable.html#touchDistance">touchDistance</a>&quot;: float
   &quot;<a class="reference external" href="../api/Leap.Pointable.html#touchZone">touchZone</a>&quot;: string - one of &quot;none&quot;, &quot;hovering&quot;, &quot;touching&quot;
</pre>
<p>Note that gesture data is only included in a frame of data if gesture recognition is enabled by sending the <tt class="docutils literal"><span class="pre">enableGestures</span></tt> message to the WebSocket server.</p>
<div class="section" id="motion-factors">
<h3>Motion factors<a class="headerlink" href="#motion-factors" title="Permalink to this headline">¶</a></h3>
<p>The motion factors, r, s, t, attached to Hand and LeapFrame objects are snapshots of the motion occuring across frames. These factors must be combined with those of a previous frame to derive the relative motion.</p>
<ul class="simple">
<li>r &#8211; a 3x3 rotation matrix</li>
<li>s &#8211; a scale factor</li>
<li>t &#8211; a 3-element translation vector</li>
</ul>
<div class="section" id="rotation-factor">
<span id="rotation"></span><h4>Rotation factor<a class="headerlink" href="#rotation-factor" title="Permalink to this headline">¶</a></h4>
<p>The matrix expressing the relative rotation between two frames can be calculated by multiplying the r matrix from the current frame by the inverse of the r matrix of the starting frame.</p>
<div class="math">
\[\mathbf{rotation} = \mathbf{r_{current frame}} * \mathbf{r_{since frame}^{-1}}\]</div>
</div>
<div class="section" id="scale-factor">
<span id="scale"></span><h4>Scale factor<a class="headerlink" href="#scale-factor" title="Permalink to this headline">¶</a></h4>
<p>The relative scale factor between two frames can be calculated by subtracting the s value from the starting frame from the current s value and computing the natural exponential function of the result.</p>
<div class="math">
\[scalefactor = \exp(s_{current frame} - s_{sinceframe})\]</div>
</div>
<div class="section" id="translation-factor">
<span id="translation"></span><h4>Translation factor<a class="headerlink" href="#translation-factor" title="Permalink to this headline">¶</a></h4>
<p>The relative translation factor between two frames can be calculated by subtracting the t vector from the starting frame from the current t vector.</p>
<div class="math">
\[\mathbf{\overrightarrow{translation}} = \mathbf{\vec{t}}_{current frame} - \mathbf{\vec{t}}_{since frame}\]</div>
</div>
</div>
</div>
<div class="section" id="protocol-changes">
<h2>Protocol Changes<a class="headerlink" href="#protocol-changes" title="Permalink to this headline">¶</a></h2>
<p>This document describes the most recent version of the protocol.</p>
<p>Each version of the protocol corresponds to particular versions of the Leap Motion software installed on a client computer as well as a versions of the leap.js library which use the protocol:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="39%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Protocol</th>
<th class="head">Leap Motion Client Software</th>
<th class="head">Leap.js</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>v1.json</td>
<td>prerelease</td>
<td>0.1.n</td>
</tr>
<tr class="row-odd"><td>v2.json</td>
<td>prerelease</td>
<td>0.2.n</td>
</tr>
<tr class="row-even"><td>v3.json</td>
<td>1.0+</td>
<td>0.3.n</td>
</tr>
<tr class="row-odd"><td>v4.json</td>
<td>1.0.9+</td>
<td>0.4.n</td>
</tr>
<tr class="row-even"><td>v5.json</td>
<td>1.2.0+</td>
<td>0.5.n</td>
</tr>
</tbody>
</table>
<p>The following changes were made from previous versions of the protocol:</p>
<div class="section" id="version-5">
<h3>Version 5<a class="headerlink" href="#version-5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added deviceEvent messages.</li>
<li>Removed deviceConnected events in favore of deviceEvent messages.</li>
</ul>
</div>
<div class="section" id="version-4">
<h3>Version 4<a class="headerlink" href="#version-4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added <tt class="docutils literal"><span class="pre">focused</span></tt> and <tt class="docutils literal"><span class="pre">background</span></tt> messages.</li>
<li>Removed <tt class="docutils literal"><span class="pre">heartbeat</span></tt> messages. Servers supporting protocol version 4 or above ignore heartbeat messages, even when connecting to clients requesting protocol versions 2 or 3.</li>
</ul>
</div>
<div class="section" id="version-3">
<h3>Version 3<a class="headerlink" href="#version-3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added <tt class="docutils literal"><span class="pre">deviceConnected</span></tt> events.</li>
</ul>
</div>
<div class="section" id="version-2">
<h3>Version 2<a class="headerlink" href="#version-2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added <tt class="docutils literal"><span class="pre">heartbeat</span></tt> messages. If your application supports protocol version 2 or 3, you should send a heartbeat message every 100ms from clients connecting with version 2 or 3. If a heartbeat is not received by the server within this time period, it assumes the client is not active and stops sending data until it receives another heartbeat. Heartbeats were removed in version 4 in favor of <tt class="docutils literal"><span class="pre">focused</span></tt> and <tt class="docutils literal"><span class="pre">background</span></tt> messages.</li>
</ul>
<blockquote>
<div></div></blockquote>
</div>
</div>
</div>


      </div>
      <div id="sidebar" class="col-md-3">
        <div class="well-sidebar" data-spy="affix" data-offset-top="158">
          <ul>
            <li><a href="../index.html" title="Home">Objective-C Docs (v1.2)</a></li>
          </ul><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../devguide/Leap_Overview.html">API Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practices/Leap_Practices.html">Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devguide/Leap_Guides.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devguide/Leap_Guides2.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/Leap_Examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/Leap_Classes.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Leap_Supplements.html">Appendices</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Leap_Application.html">Using the Leap Motion Control Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="Leap_Visualizer.html">Using the Diagnostic Visualizer</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">WebSocket Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#protocols">Protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="#client-server-messages">Client-Server Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#json-tracking-data-format">JSON tracking data format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#protocol-changes">Protocol Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SDK_Release_Notes.html">Leap Motion SDK Release Notes</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
        
    </div>
  </div>
</div>

<footer>

  <div id="footer" class="container">

      <ul class="unstyled col-md-2">
        <h4>Downloads &amp; SDK</h4>
          <li>
              <a href="https://developer.leapmotion.com/downloads">Downloads</a>
          </li>
          <li>
              <a href="https://developer.leapmotion.com/libraries">Community Libraries</a>
          </li>
      </ul>


      <ul class="unstyled col-md-2">
        <h4>Docs &amp; API</h4>
          <li>
              <a href="https://developer.leapmotion.com/getting_started">Get Started</a>
          </li>
          <li>
              <a href="/documentation">Documentation</a>
          </li>
          <li>
              <a href="https://developer.leapmotion.com/articles">Knowledge Base</a>
          </li>
          <li>
              <a href="https://central.leapmotion.com/agreements/SdkAgreement?_r=https%3A%2F%2Fdeveloper.leapmotion.com%2F">SDK Agreement</a>
          </li>
      </ul>


      <ul class="unstyled col-md-2">
        <h4>Community</h4>
          <li>
              <a href="https://community.leapmotion.com/category/dev" target="_blank">Forums</a>
          </li>
          <li>
              <a href="http://stackoverflow.com/questions/tagged/leap-motion" target="_blank">Stack Overflow</a>
          </li>
          <li>
              <a href="https://developer.leapmotion.com/support">Support</a>
          </li>
          <li>
              <a href="https://labs.leapmotion.com">Developer Blog</a>
          </li>
          <li>
              <a href="https://twitter.com/LeapMotionDev" target="_blank">Twitter</a>
          </li>
          <li>
              <a href="https://www.facebook.com/LeapMotion" target="_blank">Facebook</a>
          </li>
      </ul>


      <ul class="unstyled col-md-2">
        <h4>About</h4>
          <li>
              <a href="https://www.leapmotion.com/product" target="_blank">Leap Motion Controller</a>
          </li>
          <li>
              <a href="http://www.leapmotion.com/company" target="_blank">Company Info</a>
          </li>
          <li>
              <a href="https://www.leapmotion.com/careers" target="_blank">Careers</a>
          </li>
          <li>
              <a href="https://www.leapmotion.com/contact" target="_blank">Contact</a>
          </li>
          <li>
              <a href="http://blog.leapmotion.com" target="_blank">Blog</a>
          </li>
          <li>
              <a href="https://www.leapmotion.com/legal" target="_blank">Privacy &amp; Terms</a>
          </li>
      </ul>


      <ul class="unstyled col-md-2">
        <h4>Apps</h4>
          <li>
              <a href="https://developer.leapmotion.com/apps/overview">Overview</a>
          </li>
          <li>
              <a href="https://developer.leapmotion.com/apps/guidelines/review-guidelines">Guidelines</a>
          </li>
          <li>
              <a href="https://developer.leapmotion.com/apps/airspace">About Airspace</a>
          </li>
          <li>
              <a href="https://warehouse.leapmotion.com/" target="_blank">Submit Your App</a>
          </li>
          <li>
              <a href="https://airspace.leapmotion.com/" target="_blank">Airspace</a>
          </li>
      </ul>

  </div>
  <script>
      //Remove dev portal footer when viewing from file system
      if(window.location.protocol == 'file:'){
          var footer = document.getElementById("footer");
          footer.parentNode.removeChild(footer);
      }
  
  </script>
  <div class="container">
    <div class="copyright">
      <span>Copyright &copy; 2012 - 2014, Leap Motion, Inc.</span>
    </div>
  </div>
</footer>
  </body>
</html>